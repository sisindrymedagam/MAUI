<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="YTShorts.MAUI.Pages.ShortsPage"
             xmlns:ctk="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             Title="Shorts"
             Shell.NavBarIsVisible="False" 
             Shell.FlyoutItemIsVisible="False" 
             Shell.TabBarIsVisible="False">

    <Grid>
        <!-- Full screen video -->
        <ctk:MediaElement x:Name="Player"
                          Source="{Binding CurrentVideo.URL}"
                          ShouldAutoPlay="True"
                          ShouldLoopPlayback="True"
                          ShouldShowPlaybackControls="False"
                          Aspect="AspectFill"
                          VerticalOptions="FillAndExpand"
                          HorizontalOptions="FillAndExpand" />

        <!-- Overlay bottom details -->
        <Grid VerticalOptions="End"
              BackgroundColor="Transparent">

            <!-- Gradient for readability -->
            <BoxView HeightRequest="120"
                     VerticalOptions="End"
                     Opacity="0.5">
                <BoxView.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="Transparent" Offset="0.0" />
                        <GradientStop Color="#000000" Offset="1.0" />
                    </LinearGradientBrush>
                </BoxView.Background>
            </BoxView>

            <!-- Text overlay -->
            <VerticalStackLayout VerticalOptions="End" Padding="10">
                <Label Text="{Binding CurrentVideo.Name}"
                       TextColor="White"
                       FontSize="14"
                       FontAttributes="Bold"
                       LineBreakMode="TailTruncation" />
            </VerticalStackLayout>
        </Grid>
        <!-- Attach swipe gestures to Grid (not ContentPage) -->
        <Grid.GestureRecognizers>
            <SwipeGestureRecognizer Direction="Up" Command="{Binding NextCommand}" />
            <SwipeGestureRecognizer Direction="Down" Command="{Binding PreviousCommand}" />
        </Grid.GestureRecognizers>
    </Grid>

    <ContentPage.ToolbarItems>
        <!--<ToolbarItem Text="Add Password" Clicked="OnAddTapped" Order="Primary" ToolTipProperties.Text="Add Password" />-->
        <ToolbarItem Text="Settings" Order="Secondary" Command="{Binding NavigateSettingsCommand}" ToolTipProperties.Text="Settings" />
    </ContentPage.ToolbarItems>
</ContentPage>